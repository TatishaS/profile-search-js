"use strict";const form=document.querySelector(".form"),formInput=form.querySelector(".form__input"),formBtn=form.querySelector(".form__btn"),usersList=document.querySelector(".users__list"),usersContainer=document.querySelector(".users"),urlUsers="https://api.github.com/search/users?q=",urlUser="https://api.github.com/users/";let users=[];const getData=async e=>{try{const{items:s}=await fetch(`${urlUsers}${e}&per_page=10`).then((e=>e.json())),t=s.map((e=>e.login));getUsers(t)}catch(e){throw alert(e),console.error(e),e}},getUsers=async e=>{let s=[];for(let t of e){let e=fetch(`${urlUser}${t}`).then((e=>200!=e.status?null:e.json()),(e=>null));s.push(e)}users=await Promise.all(s),checkEmptyList(),users.map((e=>renderCard(e)))},handleFormSubmit=()=>{const e=formInput.value;if(e.length<3)return usersList.style.display="none",void formInput.parentElement.insertAdjacentHTML("beforeend",'<span class="alert">Недостаточно символов для поиска</span>');getData(e),formInput.value=""},renderCard=e=>{const s=`\n  <li class="users__list-item">\n                  <div class="user">\n                    <div class="user__info">\n                      <div class="user__image">\n                        <img\n                          width="100"\n                          src=${e.avatar_url?e.avatar_url:"./images/avatar.png"}\n                          alt="Аватар пользователя"\n                        />\n                      </div>\n                      <div class="user__data">\n                        <h1 class="user__name">\n                          Имя\n                          <a href=${e.html_url}>@${e.login}</a>\n                        </h1>\n                        <p class="user__about">${e.bio&&null!==e.bio?e.bio:""}</p>\n                      </div>\n                    </div>\n                    <ul class="user__stats">\n                      <li class="user__stats-item">\n                        Репозитории\n                        <span>${e.public_repos}</span>\n                      </li>\n                      <li class="user__stats-item">\n                        Подписчиков\n                        <span>${e.followers}</span>\n                      </li>\n                      <li class="user__stats-item">\n                        Подписок\n                        <span>${e.following}</span>\n                      </li>\n                    </ul>\n                    <ul class="user__location">\n                      <li class="user__location-item">${e.location?e.location:"Локация не опознана"}</li>\n                      <li class="user__location-item">\n                        <a href="#">${e.blog?e.blog:""}</a>\n                      </li>\n                    </ul>\n                  </div>\n                </li>\n  `;usersList.insertAdjacentHTML("beforeend",s)},clearAlert=()=>{const e=form.querySelector(".alert");e&&e.remove()},checkEmptyList=()=>{if(0===users.length){const e='<div className="user__info" id="emptyList">\n    <h2>Ничего не найдено</h2>\n  </div>';usersContainer.insertAdjacentHTML("afterbegin",e)}if(users.length>0){const e=document.querySelector("#emptyList");e&&e.remove()}usersList.style.display="block",usersList.textContent=""};form.addEventListener("submit",(e=>{e.preventDefault(),handleFormSubmit()})),formInput.addEventListener("input",clearAlert);